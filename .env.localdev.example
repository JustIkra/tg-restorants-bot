# Local Development Environment Variables
# Copy to .env and use for local development
#
# Usage:
#   cp .env.localdev.example .env
#   docker-compose up -d
#
# NOTE: These are safe defaults for local development only!
# Do NOT use these values in production!

# ============================================
# DATABASE
# ============================================
# Local development uses simple credentials
# These match docker-compose.localdev.yml postgres service
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=lunch_bot

# Database connection URL (Docker internal network)
DATABASE_URL=postgresql+asyncpg://postgres:password@postgres:5432/lunch_bot

# ============================================
# JWT AUTHENTICATION
# ============================================
# Development secret (NOT SECURE - for local testing only!)
JWT_SECRET_KEY=dev-secret-key-change-in-production-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
JWT_EXPIRE_DAYS=7

# ============================================
# KAFKA
# ============================================
# Kafka broker URL (Docker internal network)
KAFKA_BROKER_URL=kafka:29092

# ============================================
# REDIS
# ============================================
# Redis URL (Docker internal network)
REDIS_URL=redis://redis:6379

# ============================================
# TELEGRAM
# ============================================
# Get a test bot token from @BotFather for local development
# Create a separate bot for testing (not your production bot!)
TELEGRAM_BOT_TOKEN=your_test_bot_token_here

# URL for Telegram Mini App (use ngrok for local testing with real Telegram)
# For local development without Telegram: http://localhost
# For testing with Telegram: https://your-ngrok-url.ngrok-free.app
TELEGRAM_MINI_APP_URL=http://localhost

# ============================================
# GEMINI AI
# ============================================
# Get free API keys from: https://aistudio.google.com/apikey
# You can use a single key for development
# Free tier: 15 requests/min, 1500 requests/day
GEMINI_API_KEYS=your_gemini_api_key_here

# Model to use (recommended for development)
GEMINI_MODEL=gemini-2.0-flash-exp

# Maximum requests per key (free tier limit)
GEMINI_MAX_REQUESTS_PER_KEY=15

# ============================================
# CORS
# ============================================
# Allowed origins for CORS (JSON array format)
# Localhost URLs for development
CORS_ORIGINS=["http://localhost","http://localhost:3000","http://localhost:8000","https://web.telegram.org"]

# ============================================
# FRONTEND (Next.js)
# ============================================
# API URL accessible from browser
# When using docker-compose with nginx: http://localhost/api/v1
# When running frontend standalone: http://localhost:8000/api/v1
# When testing with Telegram: https://your-ngrok-url.ngrok-free.app/api/v1
NEXT_PUBLIC_API_URL=http://localhost/api/v1

# ============================================
# DEVELOPMENT TOOLS
# ============================================
# Logging level for development
LOG_LEVEL=DEBUG

# Enable debug mode
DEBUG=true

# Hot reload for backend (enabled by default in docker-compose.localdev.yml)
UVICORN_RELOAD=true

# ============================================
# QUICK START GUIDE
# ============================================
# 1. Copy this file:
#    cp .env.localdev.example .env
#
# 2. Get a test Telegram bot token:
#    - Open Telegram, find @BotFather
#    - Send /newbot and follow instructions
#    - Copy the token to TELEGRAM_BOT_TOKEN above
#
# 3. (Optional) Get Gemini API key:
#    - Visit https://aistudio.google.com/apikey
#    - Create new API key
#    - Copy to GEMINI_API_KEYS above
#
# 4. Start services:
#    docker-compose up -d
#
# 5. Check logs:
#    docker-compose logs -f
#
# 6. Access services:
#    - Frontend: http://localhost
#    - Backend API: http://localhost/api/v1
#    - API Docs: http://localhost/api/v1/docs
#    - PostgreSQL: localhost:5432 (not exposed by default)
#
# 7. For Telegram Mini App testing:
#    - Install ngrok: https://ngrok.com/download
#    - Run: ngrok http 80
#    - Update TELEGRAM_MINI_APP_URL and NEXT_PUBLIC_API_URL
#    - Set Mini App URL in @BotFather: /setmenubutton
#
# ============================================
# TROUBLESHOOTING
# ============================================
# If services fail to start:
#   - Check ports 80, 5432, 6379, 9092 are not in use
#   - Run: docker-compose down -v (WARNING: deletes data!)
#   - Run: docker-compose up -d --build
#
# To reset database:
#   docker-compose down -v
#   docker-compose up -d
#
# To view logs:
#   docker-compose logs -f [service_name]
#   # Example: docker-compose logs -f backend
#
# ============================================
