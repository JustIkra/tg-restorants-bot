# tg-restorants-bot
  ![Python](https://img.shields.io/badge/Python-3776AB?style=flat&logo=python&logoColor=white)
  ![Docker](https://img.shields.io/badge/Docker-2496ED?style=flat&logo=docker&logoColor=white)                                                                                                       ![Next.js](https://img.shields.io/badge/Next.js-000000?style=flat&logo=nextdotjs&logoColor=white)
  ![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=flat&logo=typescript&logoColor=white)
## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**tg-restorants-bot** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–∞ –æ–±–µ–¥–æ–≤ —á–µ—Ä–µ–∑ Telegram Mini App, —Å –º–æ—â–Ω—ã–º backend –Ω–∞ FastAPI –∏ —É–¥–æ–±–Ω—ã–º frontend –Ω–∞ Next.js. –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ñ–µ, –º–µ–Ω—é, –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∑–∞–∫–∞–∑–æ–≤.

---

## –ö–∏–ª–ª–µ—Ä-—Ñ–∏—á–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Mini App**: –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–∞–±–æ—Ç–∞ –ø—Ä—è–º–æ –≤ Telegram.
- **–ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ñ–µ –∏ –º–µ–Ω—é**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ñ–µ, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–µ–Ω—é, –æ–ø—Ü–∏–∏ –±–ª—é–¥.
- **–î–µ–¥–ª–∞–π–Ω—ã –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ä–æ–∫–∞—Ö –∑–∞–∫–∞–∑–∞.
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã**: —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∑–∞–∫–∞–∑–∞–º, –±—ã—Å—Ç—Ä—ã–µ —Å–≤–æ–¥–∫–∏ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤.
- **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.
- **Kafka-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –∏ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π.
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Docker, PostgreSQL, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Python, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Alembic.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram, CORS, SSL-ready.
- **–£–º–Ω–æ–µ –≥–µ–æ–ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é + –Ø–Ω–¥–µ–∫—Å/OSM –≥–µ–æ–∫–æ–¥–µ—Ä.
- **–ü–∞—Ä—Å–µ—Ä –º–µ–Ω—é –∏–∑ —Ñ–æ—Ç–æ/PDF**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –±–ª—é–¥ —á–µ—Ä–µ–∑ OCR (PaddleOCR) + —Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ LLM


---

---

## –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞

### üë®‚Äçüíª –ë—ç–∫–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- **–ú–æ—Ä–¥–≤–∏–Ω–∫–∏–Ω –ú–∞–∫—Å–∏–º**  
  –°—Ç–µ–∫: Python, Docker, FastAPI, PostgreSQL, Kafka, Redis  
  –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ backend, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
  
- **–¢–∞–ø–∏–ª–∏–Ω –Ø—Ä–æ—Å–ª–∞–≤**  
  –°—Ç–µ–∫: Python, Docker, FastAPI, SQLAlchemy, Alembic  
  –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: API, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

### üë©‚Äçüíª –§—Ä–æ–Ω—Ç–µ–Ω–¥:
- **–Ø–∫–∏–º–µ–Ω–∫–æ –í–∞–ª–µ—Ä–∏—è** (Frontend Team Lead + —á–∞—Å—Ç—å –±—ç–∫–µ–Ω–¥–∞)  
  –°—Ç–µ–∫: Next.js, TypeScript, Tailwind CSS, Python  
  –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ frontend, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp, UI/UX

### üé® –î–∏–∑–∞–π–Ω:
- **–ö—Ä–∏–≤–µ–Ω–∫–æ –ï–≤–∞** (–î–∏–∑–∞–π–Ω–µ—Ä + –ø–æ–º–æ—â–Ω–∏–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)  
  –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: UI/UX –¥–∏–∑–∞–π–Ω, –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–µ—Ä—Å—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –±–∞–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **Backend**: FastAPI, PostgreSQL, SQLAlchemy (async), Alembic, Kafka, Redis.
- **Frontend**: Next.js, TypeScript, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp.
- **Docker**: –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, nginx –¥–ª—è HTTPS.
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Alembic, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã.
- **–¢–µ—Å—Ç—ã**: Pytest, –ø–æ–∫—Ä—ã—Ç–∏–µ >75%.

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
```
backend/
  src/
    auth/         # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    models/       # ORM-–º–æ–¥–µ–ª–∏
    repositories/ # CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏
    routers/      # API endpoints
    schemas/      # Pydantic-—Å—Ö–µ–º—ã
    services/     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    cache/        # Redis-–∫—ç—à
    kafka/        # –°–æ–±—ã—Ç–∏—è –∏ –ø—Ä–æ–¥—é—Å–µ—Ä
    gemini/       # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI (Google Gemini)
    telegram/     # Telegram-—É—Ç–∏–ª–∏—Ç—ã
    config.py     # –ö–æ–Ω—Ñ–∏–≥
    database.py   # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
    main.py       # FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  tests/          # –¢–µ—Å—Ç—ã (unit, integration)
  alembic/        # –ú–∏–≥—Ä–∞—Ü–∏–∏
frontend_mini_app/
  src/            # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
nginx/            # –ö–æ–Ω—Ñ–∏–≥–∏ nginx
specs/            # –¢–µ—Å—Ç-–ø–ª–∞–Ω—ã
```

---

## –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç

### 1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
cp .env.localdev.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Å–≤–æ–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# Backend API: http://localhost/api/v1
# Frontend: http://localhost
# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: http://localhost/api/v1/docs
```

#### –ü—Ä–æ–¥–∞–∫—à–µ–Ω
```bash
cp .env.production.example .env.production
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env.production –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–∑–Ω–∞—á–µ–Ω–∏—è–º–∏

# –ó–∞–ø—É—Å–∫
docker-compose -f docker-compose.prod.yml up -d
```

#### –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
```bash
docker-compose exec backend alembic upgrade head
```

#### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
```bash
docker-compose logs -f [service_name]
```

---

### 2. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ backend (FastAPI)

```bash
cd backend
python -m venv .venv
source .venv/bin/activate
pip install -e .
cp .env.example .env
alembic upgrade head
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

---

### 3. –ó–∞–ø—É—Å–∫ frontend (Next.js)

```bash
cd frontend_mini_app
npm install
npm run dev
# http://localhost:3000
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–≥–ª–∞–≤–Ω—ã–µ)

- `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
- `JWT_SECRET_KEY` ‚Äî —Å–µ–∫—Ä–µ—Ç –¥–ª—è JWT (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- `CORS_ORIGINS` ‚Äî —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã
- `GEMINI_API_KEYS` ‚Äî –∫–ª—é—á–∏ –¥–ª—è Google Gemini (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü—Ä–∏–º–µ—Ä `.env`:
```env
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/lunch_bot
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
JWT_SECRET_KEY=your-very-long-secret-key-at-least-32-characters-long
CORS_ORIGINS=["http://localhost:3000"]
```

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

Swagger: http://localhost/api/v1/docs
ReDoc: http://localhost/api/v1/redoc

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ best practices
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–Ω–µ git
- SSL —á–µ—Ä–µ–∑ nginx –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –°–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏
- –ë—ç–∫–∞–ø—ã –ë–î
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## Troubleshooting
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ `docker-compose logs`
- –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç: `lsof -i :80`
- –î–ª—è —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö: `docker-compose down -v && docker-compose up -d --build`
- –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ backend: `docker-compose exec backend bash`

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary
