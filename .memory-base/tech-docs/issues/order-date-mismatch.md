# Order Date Selection Mismatch

## Summary
- Frontend flow (`.memory-base/tech-docs/frontend-components.md`) всегда создаёт заказ на завтра: `orderDate` описан как `tomorrow` и `handleCheckout` вычисляет `order_date` через `today + 1`.
- Бизнес-логика поддерживает дедлайны для текущего дня (см. `.memory-base/tech-docs/api.md` — `/orders/availability/{date}` и дедлайны по времени), поэтому при открытом дедлайне пользователь не может оформить заказ на сегодня.

## Impact
- Нельзя сделать заказ в день оформления, даже если время до дедлайна есть.
- Проверки доступности (`/orders/availability/{date}`) для текущего дня не используются во фронте → потенциальные рассинхроны с бекендом и жалобы пользователей.
- Менеджеры видят дедлайны/расписания, но клиенты ограничены только «за завтра», что противоречит поведению API.

## Suggested Direction
- Во фронте: позволить выбирать дату (сегодня/завтра) в пределах доступности, или хотя бы выбирать «сегодня» при открытом дедлайне через вызов `/orders/availability/{date}`.
- В документации фронта: обновить раздел про `orderDate` и флоу `handleCheckout`, убрать жёсткое `+1 day`, описать использование эндпоинта доступности.
- В API: оставить текущий контракт (`order_date` передаётся явным ISO `YYYY-MM-DD`), опционально документировать рекомендации по выбору даты на клиенте.

## Решение / действия
- Фронт: вычислять `order_date` на основе доступности:
  - запрашивать `/orders/availability/week?cafe_id={id}` или `/orders/availability/{date}?cafe_id={id}` для текущей даты;
  - если `today.can_order === true` — предлагать/выбирать сегодня; иначе брать ближайший день из списка, где `can_order === true`;
  - при клике «Оформить» слать выбранный `order_date`, не вычислять `today + 1`.
- Доки: фронтовая документация обновлена (раздел Order Submission / Order Date Selection) — жёсткая привязка к завтра удалена, описано получение доступных дат, выбор ближайшей и блокировка кнопки, если дат нет.
- Тесты (нужно сделать): unit/интеграционные проверки на выбор даты: (а) сегодня открыто — отправляем сегодня; (б) сегодня закрыто — отправляем ближайший доступный день; (в) отсутствие доступных дней — блокируем отправку с понятной ошибкой/текстом.
